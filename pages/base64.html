<!DOCTYPE html>
<html lang="zh">
<head>
    <link rel="icon" href="/resources/icon.png" type="image/png">
    <link rel="shortcut icon" href="/resources/icon.png" type="image/png">
    <meta name="apple-touch-icon" content="/resources/icon.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base64编码与解码工具</title>
    <style>
        body {
            background-size: cover;
            background-image: url('https://bing.img.run/rand_1366x768.php');
            display: flex;
            flex-direction: column;
            align-items: center; /* 水平居中 */
            justify-content: center; /* 垂直居中 */
            height: 100vh; /* 视口高度 */
            margin: 0; /* 去掉默认的边距 */
            font-family: Arial, sans-serif; /* 设置字体 */
        }

        .content {
            background-color: rgba(255, 255, 255, 0.8); /* 半透明白色背景 */
            border-radius: 10px; /* 圆角 */
            padding: 20px; /* 内边距 */
            display: flex;
            flex-direction: column;

            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); /* 阴影效果 */
            text-align: center; /* 文本居中 */
            max-width: 500px; /* 最大宽度 */
            width: 90%; /* 宽度为视口的90% */
        }


        .container {
            text-align: center; /* 文字居中 */
        }

        .input-group {
            display: flex; /* 水平排列输入框和按钮 */
            justify-content: center; /* 水平居中对齐 */
            margin: 10px 0; /* 上下间距 */
        }

        input {
            padding: 10px; /* 输入框内边距 */
            width: 250px; /* 输入框宽度 */
            margin-right: 10px; /* 输入框和按钮之间的间距 */
        }

        button {
            padding: 10px 20px; /* 按钮内边距 */
            cursor: pointer; /* 鼠标悬停时显示手型 */
        }
        img {
            max-width: 60%; /* 图片最大宽度为100% */
            border-radius: 10px; /* 图片圆角 */
            margin-top: 20px; /* 图片与其他内容之间的间距 */
            align-self: center;
        }
    </style>
</head>
<body>
<div class="content">


    <div class="container">
        <h1>Base64编码与解码</h1>
        <!-- 解码部分 -->
        <label for="decodeInput">请输入待解码内容：</label>
        <div class="input-group">
            <input type="text" id="decodeInput" placeholder="5L2g5aW9">
            <button onclick="convertFromBase64()">解码并复制</button>
        </div>
        <!-- 编码部分 -->
        <label for="encodeInput">请输入待编码内容：</label>
        <div class="input-group">
            <input type="text" id="encodeInput" placeholder="你好">
            <button onclick="convertToBase64()">编码并复制</button>
        </div>


    </div>
    <a href="/index.html">回到主页</a>


</div>
<script>
    // JavaScript 函数：将输入内容转换为 Base64 编码
    function convertToBase64() {
        var inputText = document.getElementById("encodeInput").value;
        try {

            // 使用 TextEncoder 将文本编码为 UTF-8
            var encoder = new TextEncoder();
            var utf8Array = encoder.encode(inputText);

            // 使用 btoa 将字节数组转换为 Base64
            var base64Encoded = btoa(String.fromCharCode(...utf8Array));

            // 将编码结果显示在解码输入框中
            document.getElementById("decodeInput").value = base64Encoded;

            // 将编码结果写入剪贴板
            copyToClipboard(base64Encoded);
        } catch (e) {
            document.getElementById("decodeInput").value = "编码失败！";
        }
    }

    // JavaScript 函数：将 Base64 编码转换为原始文本
    function convertFromBase64() {
        var base64Input = document.getElementById("decodeInput").value;
        try {
            // 解码 Base64 字符串
            var binaryString = atob(base64Input);
            var length = binaryString.length;
            var bytes = new Uint8Array(length);

            // 将字符串转换为字节数组
            for (var i = 0; i < length; i++) {
                bytes[i] = binaryString.charCodeAt(i);
            }

            // 使用 TextDecoder 将字节数组解码为文本
            var decoder = new TextDecoder();
            var decodedText = decoder.decode(bytes);

            // 将解码结果显示在编码输入框中
            document.getElementById("encodeInput").value = decodedText;

            // 将解码结果写入剪贴板
            copyToClipboard(decodedText);
        } catch (e) {
            document.getElementById("encodeInput").value = "解码失败！";
        }
    }

    // JavaScript 函数：将内容复制到剪贴板
    function copyToClipboard(text) {
        var textarea = document.createElement("textarea");
        textarea.value = text; // 将要复制的文本赋值给 textarea
        document.body.appendChild(textarea); // 添加 textarea 到文档中
        textarea.select(); // 选中 textarea 中的文本
        document.execCommand("copy"); // 执行复制命令
        document.body.removeChild(textarea); // 从文档中移除 textarea
    }
</script>

</body>
</html>
